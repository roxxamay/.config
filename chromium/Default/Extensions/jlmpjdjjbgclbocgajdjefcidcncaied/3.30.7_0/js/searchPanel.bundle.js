"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2949],{66489:(e,t,r)=>{r.r(t),r.d(t,{SearchPanel:()=>$e,default:()=>et});var n,l=r(98935),a=r(28076),o=r(29901),i=r(83849),c=r.n(i),s=r(2832),u=r(51911),d=r(20638),v=r(16309),p=r(4714),f=r(20102);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const h=function(e){return o.createElement("svg",m({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=o.createElement("path",{d:"M10 3.347c1.138 0 2.213.266 3.163.739-.255.462-.74.764-1.283.787l-.87.036A5.636 5.636 0 0010 4.818c-3.038 0-5.5 2.415-5.5 5.394 0 2.906 2.344 5.276 5.279 5.39l.221.004.221-.004c2.935-.114 5.279-2.484 5.279-5.39l-.003-.13.082-.215c.2-.524.676-.893 1.234-.967l.058-.005a6.771 6.771 0 01-.803 4.742 2.849 2.849 0 012.076.657l.157.143 1.872 1.836a2.731 2.731 0 010 3.916 2.864 2.864 0 01-3.852.13l-.14-.13-1.872-1.836a2.732 2.732 0 01-.818-2.19 7.062 7.062 0 01-3.491.914c-3.866 0-7-3.073-7-6.865 0-3.791 3.134-6.865 7-6.865zm5.37 12.13a1.28 1.28 0 00-.097 1.73l.096.106 1.872 1.836c.241.236.552.362.868.378h.135l.135-.013c.269-.04.527-.162.733-.365a1.28 1.28 0 00.097-1.73l-.097-.106-1.871-1.835a1.342 1.342 0 00-1.872 0zm.05-12.056l.044 1.013a2.493 2.493 0 001.648 2.225l.97.355c.457.167.35.83-.138.85l-1.033.044a2.592 2.592 0 00-.304.03l-.05.01c-.08.014-.159.032-.236.054l-.147.046-.18.07-.168.08-.113.063-.141.09-.164.121-.032.026c-.323.27-.579.62-.734 1.026l-.361.95a.43.43 0 01-.373.285h-.078l-.077-.012a.429.429 0 01-.34-.407l-.044-1.014a2.493 2.493 0 00-1.648-2.224l-.97-.355c-.457-.167-.35-.83.138-.85l1.034-.044c.3-.013.588-.077.855-.185l.109-.048c.175-.08.34-.178.49-.294l.148-.122.12-.114.136-.152.045-.056.078-.104.055-.082-.03.046a2.47 2.47 0 00.262-.505l.362-.95c.17-.45.846-.345.867.134z",fill:"currentcolor",fillRule:"evenodd"})))};var b;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}const g=function(e){return o.createElement("svg",y({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),b||(b=o.createElement("path",{d:"M10 3a6.97 6.97 0 013.288.819l-.034.092-.045.109c-.017.035-.034.07-.053.104l-.051.083-.036.055-.051.069-.02.025-.103.112-.068.063-.094.076a1.517 1.517 0 01-.266.157l-.103.047c-.13.052-.305.091-.484.099l-1.034.044c-1.577.068-1.923 2.252-.444 2.804l.97.361c.578.216.971.757.998 1.375l.044 1.033a1.433 1.433 0 001.102 1.344l.157.029.164.012h.078c.627-.054 1.101-.402 1.303-.94l.361-.97c.093-.248.246-.465.445-.634l.025-.021.126-.094.081-.05.063-.033.113-.053.111-.04.082-.025a1.92 1.92 0 01.114-.024l.04-.007a1.52 1.52 0 01.175-.018l-.024.002c.046.325.07.657.07.995 0 1.272-.34 2.465-.932 3.492a2.813 2.813 0 012.076.67l.157.147 1.872 1.871a2.823 2.823 0 01-3.852 4.125l-.14-.132-1.872-1.872a2.817 2.817 0 01-.818-2.234A7 7 0 1110 3zm5.37 12.37a1.324 1.324 0 00-.097 1.763l.096.108 1.872 1.871c.241.242.552.37.868.386h.135l.135-.014a1.324 1.324 0 00.83-2.136l-.097-.107-1.871-1.872a1.323 1.323 0 00-1.872 0zm.05-11.94l.044 1.033a2.537 2.537 0 001.648 2.268l.97.362c.457.17.35.846-.138.867l-1.033.044-.153.011-.15.02-.051.01c-.08.014-.159.033-.236.055l-.147.047-.18.071-.168.082-.113.064-.141.092-.164.124-.032.026a2.534 2.534 0 00-.734 1.046l-.361.97a.432.432 0 01-.296.276l-.077.013h-.078l-.077-.011a.435.435 0 01-.34-.416l-.044-1.033a2.537 2.537 0 00-1.648-2.269l-.97-.361c-.457-.171-.35-.847.138-.868l1.034-.044c.3-.013.588-.078.855-.188l.109-.05c.175-.08.34-.181.49-.3l.148-.124.12-.116.136-.155.045-.057.078-.106.03-.049-.004.008.006-.009.092-.15a2.54 2.54 0 00.163-.352l.362-.97c.17-.457.846-.35.867.138z",fill:"currentcolor",fillRule:"evenodd"})))};var x,w=o.createElement,O=function(e){return w(p.ZP,(0,u.Z)({},e,{IconPrimary:h,IconSecondary:g}))};function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}const j=function(e){return o.createElement("svg",P({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),x||(x=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3a9 9 0 110 18 9 9 0 010-18zm0 1.5a7.5 7.5 0 110 15 7.5 7.5 0 010-15zm3.603 10.056a.749.749 0 01-1.054 1.042l-.077-.067L12 13.059l-2.472 2.472a.749.749 0 01-1.131-.975l.072-.084L10.941 12 8.469 9.528l-.072-.084A.749.749 0 019.45 8.402l.077.067L12 10.941l2.472-2.472a.749.749 0 011.131.975l-.072.084L13.059 12l2.472 2.472.072.084z",fill:"currentColor"})))};var N;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}const A=function(e){return o.createElement("svg",k({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),N||(N=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 10-18 0 9 9 0 0018 0zm-5.464 3.536a1 1 0 000-1.415L13.414 12l2.122-2.121a1 1 0 00-1.415-1.415L12 10.586 9.879 8.464A1 1 0 008.464 9.88L10.586 12l-2.122 2.121a1 1 0 101.415 1.415l2.12-2.122 2.122 2.122a1 1 0 001.415 0z",fill:"currentColor"})))};var E,q=o.createElement,S=function(e){return q(p.ZP,(0,u.Z)({},e,{IconPrimary:j,IconSecondary:A}))},C=r(30247),Z=r(61991),z=r(24283),I=r(68071),L=r(12795),R=function(){},D=(0,o.createContext)({provider:L.xQ.Posts,providerText:void 0,query:"",isActive:!1,setProvider:R,setActive:R}),T=r(96628),M=r(98309),Q=r(88467),B=o.createElement,F=function(e){var t=e.className,r=e.keys,n=(0,o.useState)(!1),l=n[0],a=n[1];return(0,o.useEffect)((function(){a(!0)}),[]),l?B("div",{className:c()(t,"flex")},r.map((function(e,t){return B(o.Fragment,{key:e},B("kbd",{className:"flex min-w-5 justify-center rounded-8 border border-theme-divider-tertiary bg-background-subtle px-2 py-0.5 font-sans text-theme-label-tertiary typo-footnote"},e),t!==r.length-1&&B("span",{className:"mx-1 py-0.5 text-theme-label-tertiary typo-footnote"},"+"))}))):null},_=r(53767),X=r(23016);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(this,arguments)}const H=function(e){return o.createElement("svg",J({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),E||(E=o.createElement("g",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor"},o.createElement("path",{d:"M17.793 3.708a3.145 3.145 0 002.488 2.453l1.268.244c.599.116.602.97.004 1.098l-1.266.27c-.125.027-.248.061-.368.102l-.06.021c-.096.035-.19.074-.28.118l-.172.088-.208.126-.191.136-.126.102-.156.142-.178.187-.034.04a3.19 3.19 0 00-.695 1.442l-.252 1.27a.544.544 0 01-.402.435l-.097.017-.097.001a.54.54 0 01-.502-.442l-.262-1.265A3.145 3.145 0 0013.72 7.84l-1.268-.244c-.599-.115-.602-.97-.004-1.098l1.266-.27c.367-.078.71-.218 1.018-.41l.124-.083c.2-.136.383-.295.546-.472l.156-.184.124-.168.138-.22.044-.079.074-.147.023-.051.03-.064.002-.006c.083-.197.147-.405.19-.62l.251-1.27c.12-.6.974-.608 1.098-.01l.262 1.264zm-.795 1.926c.357.54.822.998 1.366 1.347l-.264.188-.196.159-.229.208-.24.253-.058.067-.008.01a4.705 4.705 0 00-.369.499 4.65 4.65 0 00-1.366-1.346l.06-.04.007-.005a4.67 4.67 0 00.804-.696l.019-.02.209-.246.188-.255.077-.123zM9.743 8.62l.367 1.771a4.404 4.404 0 003.483 3.435l1.776.341c.838.162.843 1.36.006 1.537l-1.773.378a4.482 4.482 0 00-.515.143l-.085.03a4.467 4.467 0 00-.392.164l-.24.124-.291.176-.268.19-.177.143-.218.2-.248.261-.048.056a4.467 4.467 0 00-.974 2.019l-.353 1.778a.762.762 0 01-.563.609l-.134.024-.137.001a.755.755 0 01-.702-.618L7.89 19.61a4.404 4.404 0 00-3.483-3.435l-1.776-.341c-.838-.162-.843-1.359-.006-1.537l1.773-.378c.514-.11.994-.306 1.425-.574l.174-.117c.28-.191.536-.413.764-.661l.219-.257.173-.235.194-.308.062-.111.103-.206.032-.071c.014-.03.028-.06.04-.09l.003-.007c.117-.276.207-.567.267-.869l.353-1.778c.166-.84 1.363-.851 1.536-.016zm-.752 3.194a5.905 5.905 0 003.196 3.151 6.003 6.003 0 00-.223.1l-.02.01-.306.158-.383.231-.352.25-.246.2-.291.265-.312.328-.071.083-.008.01a5.976 5.976 0 00-.966 1.588 5.905 5.905 0 00-3.196-3.15c.28-.12.547-.26.802-.418l.024-.015.196-.132.008-.006a5.94 5.94 0 001.022-.884l.02-.02.27-.32.238-.322.245-.388.097-.174.132-.264.045-.1.08-.18z"}))))};var K;function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}const V=function(e){return o.createElement("svg",U({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),K||(K=o.createElement("g",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor"},o.createElement("path",{d:"M17.793 3.708a3.145 3.145 0 002.488 2.453l1.268.244c.599.116.602.97.004 1.098l-1.266.27c-.125.027-.248.061-.368.102l-.06.021c-.096.035-.19.074-.28.118l-.172.088-.208.126-.191.136-.126.102-.156.142-.178.187-.034.04a3.19 3.19 0 00-.695 1.442l-.252 1.27a.544.544 0 01-.402.435l-.097.017-.097.001a.54.54 0 01-.502-.442l-.262-1.265A3.145 3.145 0 0013.72 7.84l-1.268-.244c-.599-.115-.602-.97-.004-1.098l1.266-.27c.367-.078.71-.218 1.018-.41l.124-.083c.2-.136.383-.295.546-.472l.156-.184.124-.168.138-.22.044-.079.074-.147.023-.051.03-.064.002-.006c.083-.197.147-.405.19-.62l.251-1.27c.12-.6.974-.608 1.098-.01l.262 1.264zM9.743 8.62l.367 1.771a4.404 4.404 0 003.483 3.435l1.776.341c.838.162.843 1.36.006 1.537l-1.773.378a4.482 4.482 0 00-.515.143l-.085.03a4.467 4.467 0 00-.392.164l-.24.124-.291.176-.268.19-.177.143-.218.2-.248.261-.048.056a4.467 4.467 0 00-.974 2.019l-.353 1.778a.762.762 0 01-.563.609l-.134.024-.137.001a.755.755 0 01-.702-.618L7.89 19.61a4.404 4.404 0 00-3.483-3.435l-1.776-.341c-.838-.162-.843-1.359-.006-1.537l1.773-.378c.514-.11.994-.306 1.425-.574l.174-.117c.28-.191.536-.413.764-.661l.219-.257.173-.235.194-.308.062-.111.103-.206.032-.071c.014-.03.028-.06.04-.09l.003-.007c.117-.276.207-.567.267-.869l.353-1.778c.166-.84 1.363-.851 1.536-.016z"}))))};var W,Y,G=o.createElement,$=function(e){return G(p.ZP,(0,u.Z)({},e,{IconPrimary:H,IconSecondary:V}))},ee=["className"],te=o.createElement,re=L.xQ.Posts,ne=(W={},(0,a.Z)(W,L.xQ.Posts,"Search posts"),(0,a.Z)(W,L.xQ.Chat,"Ask daily.dev AI"),W),le=(Y={},(0,a.Z)(Y,L.xQ.Posts,X.W),(0,a.Z)(Y,L.xQ.Chat,(function(e){var t=e.className,r=(0,_.Z)(e,ee);return te($,(0,u.Z)({className:c()(t,"bg-gradient-to-t from-theme-color-onion to-theme-color-cabbage text-white"),secondary:!0},r))})),Y),ae=o.createElement;function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=ie(ie({},le),{},(0,a.Z)({},L.xQ.Posts,void 0)),se=function(e){var t=e.className,r=(0,o.useContext)(D),n=ce[r.provider];return n?ae(n,{className:c()(t,"rounded-8 p-1"),size:p.Jh.Large}):null},ue=r(86138),de=o.createElement,ve=function(e){var t=e.className,r=(0,o.useContext)(D),n=(0,ue.C)();if(!r.providerText)return null;var l=null==n?void 0:n.sanitize;return de("div",{className:c()(null==t?void 0:t.main,"pointer-events-none absolute left-14 flex h-10")},de("span",{"aria-hidden":"true",className:c()(null==t?void 0:t.input,"invisible typo-body")},r.query),!!l&&de("div",{className:"ml-0.5 flex items-center rounded-4 bg-overlay-quaternary-cabbage px-1"},de("span",{className:"text-theme-label-tertiary typo-footnote",dangerouslySetInnerHTML:{__html:l(r.providerText)}})))},pe=r(93309),fe=r(62699),me=r.n(fe),he=r(63496),be=r(96206),ye=r(51273),ge=r(85734),xe=(0,a.Z)({},L.xQ.Posts,L.YX),we=function(){var e=(0,s.useRouter)(),t=(0,he.Y)().requestMethod,r=(0,ye.SS)(ge.z.searchVersion);return{search:(0,o.useCallback)((function(t){var r=t.provider,n=t.query;e.push((0,L.Tt)({query:n,provider:r}))}),[e]),getSuggestions:(0,o.useCallback)(function(){var e=(0,pe.Z)(me().mark((function e(n){var l,a,o;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.provider,a=n.query,xe[l]){e.next=4;break}return e.abrupt("return",{hits:[]});case 4:return e.next=6,t(be.B3,xe[l],{query:a,version:r});case 6:return o=e.sent,e.abrupt("return",o.searchPostSuggestions);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r])}},Oe=r(6189),Pe=r(86825),je=function(e){var t=e.provider,r=e.text,n=(0,o.useContext)(D),l=function(){n.setProvider({provider:t,text:r||ne[t]})},a=function(){n.setProvider({provider:void 0})};return{onMouseEnter:l,onMouseLeave:a,onFocus:function(e){(null==e?void 0:e.target)instanceof HTMLElement&&e.target.setAttribute("data-search-panel-active","true");l()},onBlur:function(e){(null==e?void 0:e.target)instanceof HTMLElement&&e.target.removeAttribute("data-search-panel-active");a()}}},Ne=o.createElement,ke=[(0,Q.ad)()?"âŒ˜":"Ctrl","K"],Ae=function(e){var t=e.className,r=e.inputProps,n=e.valueChanged,l=e.children,a=we().search,i=(0,o.useContext)(D),s=(0,o.useRef)(),m=(0,Z.Os)().trackEvent,h=r||{},b=h.value,y=h.readOnly,g=h.disabled,x=h.onFocus,w=h.onBlur,P=h.onClick,j=h.placeholder,N=void 0===j?i.isActive?"Search posts or ask a question...":"Search":j,k=(0,C.i)(b,n),A=k.inputRef,E=k.focused,q=k.hasInput,R=k.onFocus,B=k.onBlur,_=k.onInput,X=k.setInput,J=(0,z.Eu)(),H=J.isLoggedIn,K=J.showLogin,U=(0,T.V)(T.d.Laptop);(0,M.O)(globalThis,"click",(function(e){(0,Q.le)(s.current)||s.current.contains(e.target)||!s.current||(B(),i.setActive({isActive:!1}))}));var V=i.isActive&&i.query.length>=L.RX;(0,M.O)(globalThis,"keydown",(function(e){var t,r;(0,Q.IN)({event:e})&&"k"===e.key&&(e.preventDefault(),i.isActive?(null===(t=A.current)||void 0===t||t.blur(),i.setActive({isActive:!1})):(null===(r=A.current)||void 0===r||r.focus(),i.setActive({isActive:!0}),m({event_name:v.s6.KeyboardShortcutTriggered,target_id:v.LT.SearchActivation})))})),(0,M.O)(globalThis,"keydown",(function(e){var t;"Escape"===e.key&&(e.preventDefault(),i.isActive&&(null===(t=A.current)||void 0===t||t.blur(),i.setActive({isActive:!1})))}));var W=je({provider:void 0,text:ne[re]});return Ne("div",{className:c()(null==t?void 0:t.container)},Ne("form",{onSubmit:function(e,t){var r,n;if(e.preventDefault(),!H)return K({trigger:I.IP.SearchInput});var l=null!=t?t:A.current.value,o=null!==(r=i.provider)&&void 0!==r?r:re;return m({event_name:v.s6.SubmitSearch,extra:JSON.stringify({query:l,provider:o})}),X(l),i.setActive({isActive:!1}),null===(n=A.current)||void 0===n||n.blur(),a({provider:o,query:l})},className:c()(null==t?void 0:t.form,"relative w-full")},Ne(d.n,{className:c()("relative h-12 items-center rounded-12 !bg-background-subtle !px-3 laptop:border laptop:py-1 laptop:backdrop-blur-[3.75rem]",null==t?void 0:t.field,{focused:E},i.isActive&&"!border-theme-divider-tertiary laptop:shadow-2",i.isActive&&V?"laptop:rounded-b-none laptop:rounded-t-16":"laptop:rounded-16"),ref:s},Ne(O,{size:p.Jh.Large,className:"mr-3 text-theme-label-tertiary"}),Ne(d._,(0,u.Z)({},r,{"data-search-panel-item":"true",placeholder:N,ref:A,onFocus:function(e){R(),null==x||x(e),W.onFocus(e),m({event_name:v.s6.FocusSearch})},onBlur:function(e){B(),null==w||w(e),W.onBlur(e)},onClick:function(e){H||K({trigger:I.IP.SearchInput}),null==P||P(e)},onInput:_,type:"primary",autoComplete:"off",className:c()("h-full flex-1",i.isActive?"!placeholder-theme-label-quaternary":"!placeholder-theme-label-tertiary",(0,f.rI)({readOnly:y,disabled:g,hasInput:q,focused:E}))})),Ne("div",{className:c()("flex h-full items-center bg-background-subtle",i.isActive&&"-mr-2")},i.isActive&&!!i.query&&Ne(Oe.zx,{id:"search-panel-input-clear-button",type:"button",className:"mr-2",size:Pe.qE.XSmall,title:"Clear query",onClick:function(e){var t;e.stopPropagation(),X(""),null===(t=A.current)||void 0===t||t.focus()},icon:Ne(S,{secondary:!0})}),i.isActive&&Ne("div",{className:"flex h-full items-center border-l border-theme-float laptop:hidden"},Ne(Oe.zx,{type:"button",onClick:function(){i.setActive({isActive:!1})}},"Cancel"))),Ne("div",{className:"z-1 hidden items-center gap-3 laptop:flex"},!i.isActive&&Ne(F,{keys:ke}),i.isActive&&i.query.length>=L.RX&&Ne(o.Fragment,null,U&&Ne(ve,null),Ne(se,{className:"ml-2"})))),l))},Ee=["children"],qe=o.createElement,Se=function(e){var t=e.children,r=(0,_.Z)(e,Ee);return qe("button",(0,u.Z)({type:"button","data-search-panel-item":"true"},r),t)},Ce=["icon","children"],Ze=o.createElement,ze=function(e){var t=e.icon,r=e.children,n=(0,_.Z)(e,Ce);return Ze(Se,(0,u.Z)({},n,{className:c()(n.className,"flex w-full items-center gap-2 overflow-hidden rounded-12 p-2 hover:bg-theme-float focus:bg-theme-float laptop:text-theme-label-tertiary")}),!!t&&t,r)},Ie=o.createElement,Le=function(e){var t=e.provider,r=(0,o.useContext)(D),n=le[t],l=we().search,a=je({provider:t}),i=t===re,s=!r.provider&&i;return Ie(ze,(0,u.Z)({icon:Ie(n,{className:"rounded-6 p-0.5",size:p.Jh.Small}),onClick:function(){l({provider:t,query:r.query})},className:c()(s&&"bg-theme-float"),"data-search-panel-item":!i,tabIndex:i?-1:void 0},a),Ie("span",{className:"flex-shrink overflow-hidden overflow-ellipsis whitespace-nowrap typo-callout"},r.query," ",Ie("span",{className:"text-theme-label-quaternary typo-footnote"},ne[t])))},Re=r(2067),De=r(43573);function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe=r(32575),Be=["suggestion"],Fe=o.createElement,_e=function(e){var t=e.suggestion,r=(0,_.Z)(e,Be),n=je({provider:L.xQ.Posts,text:t.title}),l=(0,ue.C)(),a=null==l?void 0:l.sanitize;return Fe(ze,(0,u.Z)({},r,{icon:Fe(X.W,null)},n),!!a&&Fe("span",{className:"flex-shrink overflow-hidden overflow-ellipsis whitespace-nowrap typo-subhead [&>strong]:text-theme-label-primary",dangerouslySetInnerHTML:{__html:a(t.title)}}))},Xe=function(e){var t,r,n,l,a,i,u,d,v,p,f,m=e.className,h=e.title,b=(0,s.useRouter)(),y=(0,o.useContext)(D),g=we().search,x=(n={provider:L.xQ.Posts,query:y.query},l=n.provider,a=n.query,i=n.limit,u=void 0===i?3:i,d=(0,z.Eu)().user,v=we().getSuggestions,p=(0,Re.a)((0,De.e0)(De.dt.Search,d,"suggestions",{provider:l,query:a}),(0,pe.Z)(me().mark((function e(){return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v({provider:l,query:a}));case 1:case"end":return e.stop()}}),e)}))),{enabled:(null==a?void 0:a.length)>=L.RX,staleTime:De.R.Default,select:(0,o.useCallback)((function(e){var t;return e?Me(Me({},e),{},{hits:(null==e||null===(t=e.hits)||void 0===t?void 0:t.slice(0,u))||[]}):e}),[u])}),f=p.data,{isLoading:p.isLoading,suggestions:f}).suggestions;return null!=x&&null!==(t=x.hits)&&void 0!==t&&t.length?Fe("div",{className:c()(m,"flex flex-col")},Fe("div",{className:"relative my-2 flex items-center justify-start gap-2"},Fe("hr",{className:"w-2 border-theme-divider-tertiary"}),Fe("span",{className:"relative inline-flex font-bold typo-footnote"},h),Fe("hr",{className:"flex-1 border-theme-divider-tertiary"})),null==x||null===(r=x.hits)||void 0===r?void 0:r.map((function(e){return Fe(_e,{key:e.title,suggestion:e,onClick:function(){!function(e){if(e.id)b.push("".concat(Qe.uJ,"posts/").concat(e.id));else{var t=e.title.replace(L.F4,"");g({provider:L.xQ.Posts,query:t})}}(e)}})}))):null},Je=r(64341),He=r(75943),Ke=["provider","children"],Ue=o.createElement,Ve=function(e){var t=e.provider,r=e.children,n=(0,_.Z)(e,Ke),l=je({provider:t});return Ue(ze,(0,u.Z)({},n,l),r)},We=o.createElement;function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $e=function(e){var t=e.className;(0,o.useContext)(Je.ZP);var r=we().search,n=(0,s.useRouter)().query,i=(0,o.useState)((function(){return{provider:void 0,query:"",isActive:!1,providerText:void 0}})),u=i[0],d=i[1],v=(0,o.useRef)();(0,o.useEffect)((function(){var e,t=null==n||null===(e=n.q)||void 0===e?void 0:e.toString();t&&d((function(e){return e.query?e:Ge(Ge({},e),{},{query:t})}))}),[null==n?void 0:n.q]);var p=(0,o.useMemo)((function(){return Ge(Ge({},u),{},{setProvider:function(e){var t=e.provider,r=e.text;d((function(e){return Ge(Ge({},e),{},{provider:t,providerText:r||void 0})}))},setActive:function(e){var t=e.isActive;d((function(e){return Ge(Ge({},e),{},{isActive:t})}))}})}),[u]);(0,M.O)(v,"keydown",(function(e){var t;if(u.isActive&&v.current){var r=(0,l.Z)(v.current.querySelectorAll('[data-search-panel-item="true"]')),n=r.findIndex((function(e){return"true"===e.getAttribute("data-search-panel-active")}));-1===n&&(n=0);var o=(t={},(0,a.Z)(t,Q.k1.Up,-1),(0,a.Z)(t,Q.k1.Down,1),t),i=[Q.k1.Up,Q.k1.Down].find((function(t){return t===e.key}));if(i){e.preventDefault();var c=r[n+o[i]];c&&c.focus()}}}));var f=u.isActive&&u.query.length>=L.RX;return We(D.Provider,{value:p},We("div",{ref:v,className:c()(null==t?void 0:t.container,"flex flex-col"),"data-testid":"search-panel"},We(Ae,{className:{container:c()("w-full laptop:w-[35rem]"),field:null==t?void 0:t.field},valueChanged:function(e){d((function(t){return Ge(Ge({},t),{},{query:e,provider:void 0,providerText:ne[re]})}))},inputProps:{value:u.query,onFocus:function(){p.setActive({isActive:!0})}}},f&&We("div",{className:c()("absolute w-full items-center rounded-b-16 border-0 border-theme-divider-tertiary bg-background-default px-3 py-2 laptop:h-auto laptop:border-x laptop:border-b laptop:bg-background-subtle laptop:shadow-2")},We("div",{className:"flex flex-1 flex-col"},We(Le,{provider:L.xQ.Posts}),We(Le,{provider:L.xQ.Chat}),We(Xe,{title:"Posts on daily.dev"}),We(Ve,{provider:L.xQ.Posts,onClick:function(){r({provider:L.xQ.Posts,query:u.query})}},We("div",{className:"flex items-center justify-center text-theme-label-tertiary typo-subhead"},"See more posts ",We(He.e0,{className:"!size-4 rotate-90"}))))))))};const et=$e}}]);