"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7530],{48819:(e,n,t)=>{t.r(n),t.d(n,{default:()=>F});var u=t(70468),o=t(93309),r=t(62699),l=t.n(r),i=t(29901),s=t(1726),a=t.n(s),c=t(2067),f=t(91385),d=t.n(f),v=t(83849),h=t.n(v),p=t(35953);var g=t(96206),m=t(33014),y=t(12795),k=t(10120),S=t(81358),w=t(51273),x=t(85734),C=i.createElement,b=a()((function(){return t.e(6720).then(t.bind(t,70332))}),{ssr:!1,loadableGenerated:{webpack:function(){return[70332]}}}),I={searchPostSuggestions:y.YX,searchBookmarksSuggestions:k.gr,searchReadingHistorySuggestions:S.nr};function F(e){var n=e.initialQuery,t=e.autoFocus,r=void 0===t||t,s=e.placeholder,a=e.onSubmitQuery,f=e.className,v=e.suggestionType,k=void 0===v?"searchPostSuggestions":v,S=e.onFocus,F=(0,i.useRef)(),E=(0,w.SS)(x.z.searchVersion),B=(0,i.useState)(),D=B[0],K=B[1],R=(0,i.useState)(),Z=R[0],q=R[1],z=(0,i.useState)(null),N=z[0],P=z[1],Q=(0,i.useState)([]),Y=Q[0],G=Q[1],H=I[k],L=(0,c.a)([k,Z],(function(){return d()(g.B3,H,{query:Z,version:E})}),{enabled:!!Z}),O=L.data,T=L.isLoading;(0,i.useEffect)((function(){D||K(n)}),[n]);var U=function(){return P(null)},V=function(){if(!N){var e=F.current.getBoundingClientRect(),n=e.left,t=e.bottom,u=e.width;P({x:n,y:t+window.scrollY,width:u})}};(0,i.useEffect)((function(){var e,n,t;T||(null!=Y&&Y.length||null==O||null===(e=O[k])||void 0===e||!e.hits.length||V(),G(null!==(n=null==O||null===(t=O[k])||void 0===t?void 0:t.hits.map((function(e){return e.title})))&&void 0!==n?n:[]))}),[O,T]);var X=function(){var e=(0,o.Z)(l().mark((function e(n){var t,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=null==n||null===(t=n.replace)||void 0===t?void 0:t.call(n,y.F4,""),e.next=3,a(u||Z);case 3:u&&K(u),U();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(e,n){var t=(0,i.useState)(-1),u=t[0],o=t[1];return(0,i.useEffect)((function(){o(-1)}),[e]),{selectedItemIndex:u,onKeyDown:function(t){if(40===t.keyCode||38===t.keyCode){t.preventDefault();var r=e.length+1;if(u>-1){var l=40===t.keyCode?1:-1;o(((u+l)%r+r)%r)}else o(40===t.keyCode?0:r-1)}else 13===t.keyCode&&n(u>-1&&e[u])}}}(Y,X),A=j.selectedItemIndex,J=j.onKeyDown,M=(0,m.Z)((function(e){return q(e)}),100),W=(0,u.Z)(M,1)[0];(0,i.useEffect)((function(){var e;r&&(null===(e=F.current)||void 0===e||e.querySelector("input").focus())}),[F,r]);var $=!!N&&!!Y.length;return C(i.Fragment,null,C(p.U,{className:h()("compact flex-1",f),inputId:"posts-search",fieldSize:"medium",placeholder:null!=s?s:"Find posts",ref:F,value:D,valueChanged:function(e){if(!e.length)return U(),void q("");e&&e!==n&&W(e),null===N&&V()},onKeyDown:J,onBlur:function(){null!=Z&&Z.length&&U()},onFocus:function(e){null==S||S(e),null!=Y&&Y.length&&V()},"aria-haspopup":"true","aria-expanded":$}),C(b,{placement:N,items:Y,focusedItemIndex:A,onItemClick:X,isOpen:$}))}}}]);