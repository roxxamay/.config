"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2992],{21051:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ke});var n=o(51911),a=o(53767),s=o(29901),l=o(97518),r=o(22454),i=o(16309),c=o(409),u=o(21981),p=o(61188),d=o(52210),m=o(28076),f=o(83849),b=o.n(f),v=o(34260),g=o.n(v),h=o(73084),P=o(75160),N=o(72115),x=o(76309),y=o(39663),w=o(21161),C=o(56567),O=o(86960),S=o(73503),k=o(76204),j=o(43643),Z=o(75733),E=o(36863),A=o(99269),R=o(22589),D=o(90958),I=["onShare","post","onClose","inlineActions","className","notificationClassName","contextMenuId","onRemovePost"],T=s.createElement,q=(0,A.Z)("div","flex flex-row items-center"),M=function(e){var t=e.onShare,o=e.post,s=e.onClose,l=e.inlineActions,r=e.className,c=(e.notificationClassName,e.contextMenuId),u=e.onRemovePost,p=(0,a.Z)(e,I);return T(q,(0,n.Z)({},p,{className:b()("gap-2",r)}),T(D.E,{post:o}),T(R.b,{onShare:t,post:o,onClose:s,inlineActions:l,contextMenuId:c,onRemovePost:u,origin:i.aP.CollectionModal}))},z=o(48850),F=o(96543),L=o(91255),W=o(86825),Q=s.createElement,B=function(e){var t=e.className,o=(0,F.o)(),n=o.checkHasCompleted,a=o.completeAction;return!o.isActionsFetched||n(L.Us.CollectionsIntro)?null:Q("span",{className:b()("relative flex w-full flex-row rounded-10 border border-theme-color-cabbage p-3 pr-2",t)},Q("div",{className:"flex flex-1 flex-col typo-subhead"},Q("strong",null,"Introducing collections!"),Q("p",{className:"mt-2"},"Collections are posts that aggregate all the information about specific news to help you save time and discuss with the community.")),Q(z.Z,{size:W.qE.XSmall,onClick:function(){return a(L.Us.CollectionsIntro)}}))},H=o(93309),U=o(62699),V=o.n(U),X=o(29097),Y=o(75943),_=o(6189),J=s.createElement,G={type:"button",iconOnly:!0,buttonSize:W.qE.Small},K=function(e){var t=e.hasNext,o=e.hasPrevious,a=e.onNext,s=e.onPrevious;return J("div",{className:"flex items-center justify-end border-t border-theme-divider-tertiary p-3"},J(_.zx,(0,n.Z)({},G,{icon:J(Y.e0,{className:"-rotate-90"}),variant:W.Wu.Tertiary,disabled:!o,onClick:s})),J(_.zx,(0,n.Z)({},G,{icon:J(Y.e0,{className:"rotate-90"}),variant:W.Wu.Tertiary,disabled:!t,onClick:a})))},$=o(22057),ee=o(7675),te=o(81618),oe=o(11056),ne=o(48706),ae=o(36909),se=o(96206),le=o(43573),re=o(11178),ie=o(63496);function ce(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function ue(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(o),!0).forEach((function(t){(0,m.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ce(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var pe=s.createElement,de=function(e){var t=e.className,o=e.post,n=e.perPage,a=void 0===n?d.t:n,l=e.relationType,r=function(e){var t=e.postId,o=e.relationType,n=e.perPage,a=void 0===n?d.t:n,l=(0,ie.Y)().requestMethod,r=(0,ne.NL)(),i=(0,ae.N)((0,le.e0)(le.dt.RelatedPosts,null,{id:t,type:o}),function(){var e=(0,H.Z)(V().mark((function e(n){var s,r;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.pageParam,e.next=3,l(se.B3,d.Pl,{id:t,relationType:o,first:a,after:s});case 3:return r=e.sent,e.abrupt("return",r.relatedPosts);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{enabled:!!t,getNextPageParam:function(e){var t,o;return(null==e||null===(t=e.pageInfo)||void 0===t?void 0:t.hasNextPage)&&(null==e||null===(o=e.pageInfo)||void 0===o?void 0:o.endCursor)},select:(0,s.useCallback)((function(e){if(e)return ue(ue({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[]),staleTime:le.R.Default,initialData:function(){if(o===d.WQ.Collection){var e=r.getQueryData((0,re.NZ)(t));if(null!=e&&e.relatedCollectionPosts)return{pages:[e.relatedCollectionPosts],pageParams:[null]}}}});return{relatedPosts:i.data,isLoading:i.isLoading,hasNextPage:i.hasNextPage,fetchNextPage:i.fetchNextPage,isFetchingNextPage:i.isFetchingNextPage}}({postId:o.id,relationType:l,perPage:a}),i=r.relatedPosts,c=r.isLoading,u=r.isFetchingNextPage,p=r.hasNextPage,m=r.fetchNextPage,f=(0,s.useState)(0),v=f[0],g=f[1],h=null==i?void 0:i.pages[v],P=c||!(null==h||!h.edges.length),N=!(null==i||!i.pages[v+1]);return(0,s.useEffect)((function(){p&&!N&&m()}),[p,N,m]),P?pe("div",{className:b()(t,"flex flex-col",X.zl)},pe("div",{className:"flex cursor-pointer items-center justify-between rounded-16 rounded-t-16 px-4 py-1.5 laptop:cursor-auto laptop:py-4 laptop:!pb-0"},pe("p",{className:"font-bold text-theme-label-quaternary typo-callout laptop:text-theme-label-quaternary"},o.numCollectionSources," sources")),pe("div",{className:"flex flex-col pb-0 pt-2 laptop:min-h-[14rem]"},c&&pe("article",{"aria-busy":!0,className:"flex w-60 flex-col items-stretch px-4 py-2 laptop:w-full"},pe("div",{className:"mb-2 flex items-center"},pe($.f,{className:"mr-2 h-6 w-6 rounded-full"}),pe($.f,{className:"h-4 w-24"})),pe("div",{className:"mb-2 flex flex-1 flex-col items-center"},pe($.f,{className:"my-1 h-4 w-full"}),pe($.f,{className:"my-1 h-4 w-full"}))),!c&&(null==h?void 0:h.edges.map((function(e){var t=e.node;return pe("article",{key:t.id,className:"relative flex flex-col gap-2 px-4 py-2 hover:bg-theme-hover"},pe(oe.YS,{className:"cursor-pointer",href:t.commentsPermalink,title:t.title}),pe("div",{className:"flex overflow-hidden"},pe(ee.e,{source:t.source,size:"small"}),pe(te.Z,{description:t.source.name,createdAt:t.createdAt})),pe("p",{className:"line-clamp-2 text-theme-label-link typo-callout"},t.title),!!t.summary&&pe("p",{className:"line-clamp-2 text-theme-label-tertiary typo-footnote"},t.summary))})))),pe(K,{hasNext:N,hasPrevious:v>0,onPrevious:function(){g((function(e){return e?e-1:0}))},onNext:(0,H.Z)(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(!p||N){e.next=5;break}return e.next=5,m();case 5:g((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))})):null},me=s.createElement,fe=function(e){var t=e.onShare,o=e.post,n=e.className,a=e.onClose;return me(j.ry,{className:n},me(M,{onShare:t,post:o,onClose:a,className:"hidden pt-6 tablet:flex",contextMenuId:"post-widgets-context"}),me(B,{className:"hidden tablet:flex"}),me(de,{post:o,relationType:d.WQ.Collection}),me(E.Z,{post:o}),me(Z.I,{post:o,share:t,link:o.commentsPermalink}))},be=o(82504),ve=o(36712),ge=o(24283),he=o(32575),Pe=o(51185),Ne=o(34951),xe=s.createElement;function ye(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function we(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(o),!0).forEach((function(t){(0,m.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ye(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var Ce=function(e){var t,o,a=e.post,l=e.className,r=void 0===l?{}:l,i=e.shouldOnboardAuthor,c=e.enableShowShareNewComment,u=e.origin,p=e.position,d=e.inlineActions,m=e.onPreviousPost,f=e.onNextPost,v=e.onClose,j=e.postPosition,Z=e.isFallback,E=e.customNavigation,A=e.onRemovePost,R=e.backToSquad,D=e.isBannerVisible,I=(0,ge.Eu)().user,T=(0,P.sW)().subject,q=(0,x.Z)({origin:u,post:a}),z=a.updatedAt,F=a.contentHtml,L=a.image,W=q.onSharePost,Q=q.onReadArticle,H=!!m||!!f,U=b()("tablet:flex-row tablet:pb-0",null==r?void 0:r.container),V={postPosition:j,onPreviousPost:m,onNextPost:f,post:a,onReadArticle:Q,onClose:v,onShare:W,inlineActions:d,onRemovePost:A},X=(0,Pe.E)();return(0,s.useEffect)((function(){null!=a&&a.id&&null!=I&&I.id&&X(a.id)}),[null==a?void 0:a.id,X,null==I?void 0:I.id]),xe(N.Z,{hasNavigation:H,className:U,"aria-live":T===P._R.PostContent?"polite":"off"},"fixed"===p&&xe(y.Z,(0,n.Z)({},V,{isBannerVisible:D,className:null==r?void 0:r.fixedNavigation})),xe(be.b,{className:b()("relative",null==r?void 0:r.content),"data-testid":"postContainer"},!H&&xe(M,{onShare:W,post:a,onClose:v,className:"flex tablet:hidden",contextMenuId:"post-widgets-context"}),xe(w.F,{className:we(we({},r),{},{onboarding:b()(null==r?void 0:r.onboarding,R&&"mb-6"),navigation:{actions:null==r||null===(t=r.navigation)||void 0===t?void 0:t.actions,container:b()("pt-6",null==r||null===(o=r.navigation)||void 0===o?void 0:o.container)}}),isFallback:Z,customNavigation:E,enableShowShareNewComment:c,shouldOnboardAuthor:i,navigationProps:V,engagementProps:q,origin:u,post:a},xe("div",{className:b()("mb-6 flex flex-col gap-6",H||E?"mt-6":"mt-6 tablet:mt-0")},xe(B,{className:"tablet:hidden"}),xe(g(),{href:"".concat(he.uJ,"sources/collections"),passHref:!0},xe(ve.D,{tag:"a",label:"Collection",className:"bg-theme-overlay-float-cabbage text-theme-color-cabbage"})),xe("h1",{className:"break-words font-bold typo-large-title","data-testid":"post-modal-title"},a.title),!!z&&xe("div",{className:"flex items-center text-theme-label-tertiary typo-footnote"},xe("span",null,"Last updated")," ",xe(O.Z0,null),xe(Ne.t,{date:z,type:S.lf.Post})),L&&xe("div",{className:"block h-auto w-full overflow-hidden rounded-12"},xe(h.w,{imgSrc:L,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:C.n.post.imageCoverPlaceholder})),xe(k.Z,{content:F})))),xe(fe,{onShare:W,post:a,className:"pb-8",onClose:v,origin:u}))},Oe=["id","className","onRequestClose","onPreviousPost","onNextPost","postPosition","post","onRemovePost"],Se=s.createElement;function ke(e){e.id,e.className;var t=e.onRequestClose,o=e.onPreviousPost,m=e.onNextPost,f=e.postPosition,b=e.post,v=e.onRemovePost,g=(0,a.Z)(e,Oe),h=(0,s.useContext)(p.ZP).showArticleOnboarding,P=(0,c.Z)({isDisplayed:g.isOpen,offset:h?r.Dg:0}),N=P.position,x=P.onLoad;return Se(u.Z,(0,n.Z)({},g,{onAfterOpen:x,onRequestClose:t,postType:d.hQ.Collection,source:b.source,loadingClassName:"!pb-2 tablet:pb-0"}),Se(Ce,{position:N,post:b,postPosition:f,onPreviousPost:o,onNextPost:m,inlineActions:!0,className:{onboarding:"mt-8",navigation:{actions:"ml-auto tablet:hidden"},fixedNavigation:{container:l.Eu[l.u_.Size.XLarge],actions:"ml-auto"}},onClose:t,origin:i.aP.CollectionModal,onRemovePost:v}))}}}]);