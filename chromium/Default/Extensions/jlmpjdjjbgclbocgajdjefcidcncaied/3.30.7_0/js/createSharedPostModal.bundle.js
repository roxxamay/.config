"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2319],{2469:(e,t,n)=>{n.d(t,{r:()=>d});var a=n(51911),r=n(53767),l=n(29901),o=n(83849),s=n.n(o),i=n(36565),u=["className","labelClassName","inputId","name","checked","children","onToggle","compact","defaultTypo","disabled"],c=l.createElement;function d(e){var t=e.className,n=e.labelClassName,l=e.inputId,o=e.name,d=e.checked,m=e.children,p=e.onToggle,f=e.compact,v=void 0===f||f,b=e.defaultTypo,h=void 0===b||b,y=e.disabled,w=(0,r.Z)(e,u);return c("label",{className:s()(t,"group relative flex items-center",y?"pointer-events-none cursor-not-allowed":"cursor-pointer",i.Z.switch),htmlFor:l},c("input",(0,a.Z)({},w,{disabled:y,id:l,name:o,type:"checkbox",checked:d,onChange:p,className:"absolute h-0 w-0 opacity-0"})),c("span",{className:s()("relative block",v?"h-4 w-8":"h-5 w-10")},c("span",{className:s()("absolute bottom-0 left-0 top-0 my-auto w-full bg-theme-overlay-quaternary",v?"h-2.5 rounded-3":"h-3 rounded-4",i.Z.track)}),c("span",{className:s()("absolute left-0 top-0 bg-theme-label-tertiary",v?"h-4 w-4 rounded-3":"h-5 w-5 rounded-6",i.Z.knob)})),m&&c("span",{className:s()("ml-3 font-bold text-theme-label-tertiary",h&&"typo-footnote",i.Z.children,n)},m))}},91026:(e,t,n)=>{n.r(t),n.d(t,{CreateSharedPostModal:()=>E,default:()=>L});var a=n(51911),r=n(70468),l=n(53767),o=n(29901),s=n(97518),i=n(27846),u=n(60720),c=n(74418),d=n(96628),m=n(97834),p=n(6189),f=n(86825),v=n(57767),b=n(22278),h=n(43643),y=n(63061),w=n(43641),g=n(57332),x=n(26013),N=n(44839),k=n(2469),S=n(77034),P=["preview","squad","onSharedSuccessfully"],C=o.createElement;function E(e){var t,n,E,L=e.preview,O=e.squad,Z=e.onSharedSuccessfully,j=(0,l.Z)(e,P),z=(0,o.useRef)(),T=(0,o.useState)(null!==(t=null!==(n=null==L?void 0:L.permalink)&&void 0!==n?n:null==L?void 0:L.url)&&void 0!==t?t:""),_=T[0],q=T[1],D=(0,N.j)(),A=D.shouldShowCta,I=D.isEnabled,M=D.onToggle,R=D.onSubmitted,U=(0,d.V)(d.d.MobileL),F=(0,m.x)({initialPreview:L,onPostSuccess:function(){Z&&Z(),R(),j.onRequestClose(null)}}),J=F.getLinkPreview,W=F.isLoadingPreview,H=F.preview,K=F.isPosting,Q=F.onSubmitPost,V=[null==H?void 0:H.url,null==H?void 0:H.permalink],X=(0,x.g)(J,(function(e){return V.every((function(t){return t!==e}))})),Y=(0,r.Z)(X,1)[0];return C(s.u_,(0,a.Z)({kind:s.u_.Kind.FlexibleCenter,size:s.u_.Size.Medium},j),C(s.u_.Header,{showCloseButton:!U,title:U?null:"New post"},U&&C("div",{className:"flex flex-1 flex-row items-center justify-between"},C(S.A,{position:"static",onClick:j.onRequestClose}),C(p.zx,{variant:f.Wu.Primary,color:v.S.Cabbage,disabled:K,loading:K,form:"share_post",size:f.qE.Small},"Post"))),C("form",{className:"flex w-full flex-col p-3",action:"#",onSubmit:function(e){e.preventDefault();var t=(0,g.x)(e.currentTarget).commentary;return Q(e,O.id,t)},id:"share_post"},C(i.Z,{ref:z,showUserAvatar:!0,textareaProps:{rows:5,name:"commentary"},sourceId:null==O?void 0:O.id,allowPreview:!1,enabledCommand:{mention:!0},footer:W?C(u.X,{link:_,className:"m-3 flex-col-reverse"}):C(c.A,{className:"m-3 !w-auto flex-col-reverse",preview:null!=H?H:L,link:_,onLinkChange:function(e){var t=e.currentTarget.value;q(t),Y(t)}})}),A&&C(k.r,{"data-testid":"push_notification-switch",inputId:"push_notification-switch",name:"push_notification",labelClassName:"flex-1 font-normal",className:"py-3",compact:!1,checked:I,onToggle:M},"Receive updates whenever your Squad members engage with your post")),C(s.u_.Footer,{className:"typo-caption1",justify:h.WD.Start},C(p.zx,{icon:C(b.l,null),className:"btn-tertiary",size:f.qE.Small,onClick:null==z||null===(E=z.current)||void 0===E?void 0:E.onMentionCommand}),C(y.i,{vertical:!0}),C(w.Z,{source:O,size:"small"}),C("span",{className:"-ml-1 flex-1"},C("strong",null,O.name),C("span",{className:"ml-1 text-theme-label-tertiary"},"@",O.handle)),!U&&C(p.zx,{className:"btn-primary-cabbage ml-auto",disabled:K,loading:K,form:"share_post"},"Post")))}const L=E},74418:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(29901),r=n(33973),l=n(96883),o=n(71830),s=n(7675),i=n(53782),u=n(83103),c=n(6189),d=n(86825),m=a.createElement;function p(e){var t,n,a=e.link,p=e.preview,f=e.onLinkChange,v=e.className,b=e.isMinimized,h=e.showPreviewLink,y=void 0===h||h;return m(u.$i,{className:v},y&&m(r.n,{leftIcon:m(l.x,null),label:"URL",type:"url",name:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:a,onInput:f}),p.title&&p.image&&m(u.S5,{className:b&&"!px-3 !py-2"},m("div",{className:"flex flex-1 flex-col typo-footnote"},m("span",{className:"line-clamp-2 font-bold"},p.title),"unknown"!==(null===(t=p.source)||void 0===t?void 0:t.id)&&(b?m(s.e,{size:"small",source:p.source,className:"absolute right-24 mr-4 mt-1"}):m("span",{className:"mt-1 flex flex-row items-center"},m(s.e,{size:"small",source:p.source}),m("span",{className:"text-theme-label-tertiary"},null===(n=p.source)||void 0===n?void 0:n.name)))),m(i.E,{className:u.JE,src:p.image,alt:"".concat(p.title)}),!b&&m(c.zx,{icon:m(o.h,null),variant:d.Wu.Tertiary,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:a})))}},60720:(e,t,n)=>{n.d(t,{X:()=>m});var a=n(29901),r=n(33973),l=n(86163),o=n(22057),s=n(71830),i=n(83103),u=n(6189),c=n(86825),d=a.createElement;function m(e){var t=e.link,n=e.className;return d(i.$i,{className:n},d(r.n,{leftIcon:d(l.a,{className:"mr-2"}),label:"URL",type:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:t}),d(i.S5,null,d("span",{className:"absolute left-2 top-2 text-theme-label-quaternary typo-caption1"},"Fetching preview, please hold..."),d("div",{className:"flex flex-1 flex-col typo-footnote"},d("div",{className:"flex-flex-col relative"},d(o.f,{className:"h-2 w-5/6 rounded-12"}),d(o.f,{className:"mt-3 h-2 w-1/2 rounded-12"}))),d("div",{className:i.JE}),d(u.zx,{variant:c.Wu.Tertiary,icon:d(s.h,null),disabled:!0,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:t})))}},83103:(e,t,n)=>{n.d(t,{$i:()=>o,JE:()=>l,S5:()=>s});var a=n(99269),r=n(43643),l="w-28 h-16 rounded-12 bg-theme-label-disabled object-cover",o=(0,a.Z)(r.Ht,"rounded-16 border border-theme-divider-tertiary"),s=(0,a.Z)(r.gq,"relative gap-3 items-center py-5 px-4")},26013:(e,t,n)=>{n.d(t,{g:()=>l});var a=n(33014),r=n(28061),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,a.Z)((function(n){return(0,r.HH)(n)&&t(n)?e(n):null}),n)}},44839:(e,t,n)=>{n.d(t,{j:()=>u});var a=n(93309),r=n(62699),l=n.n(r),o=n(29901),s=n(16309),i=n(76075),u=function(){var e=(0,o.useState)(!0),t=e[0],n=e[1],r=(0,i.d)({source:s.Yq.SquadPostCommentary}),u=r.shouldShowCta,c=r.onEnable,d=r.onDismiss,m=function(){var e=(0,a.Z)(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:return n=t?c:d,e.next=5,n();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=(0,o.useCallback)((function(){return n((function(e){return!e}))}),[]);return{isEnabled:t,onToggle:p,shouldShowCta:u,onSubmitted:m}}},97834:(e,t,n)=>{n.d(t,{x:()=>g});var a=n(93309),r=n(28076),l=n(62699),o=n.n(l),s=n(48706),i=n(59266),u=n(29901),c=n(52210),d=n(57269),m=n(75160),p=n(64761),f=n(91255),v=n(24283),b=n(96543),h=n(63496);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.callback,n=e.onPostSuccess,r=e.initialPreview,l=(0,m.sW)().displayToast,y=(0,v.Eu)().user,g=(0,s.NL)(),x=(0,b.o)().completeAction,N=(0,u.useState)(r),k=N[0],S=N[1],P=(0,h.Y)().requestMethod,C=(0,i.D)((function(e){return(0,c.v1)(e,P)}),{onSuccess:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=n[0],l=n[1];S(w(w({},r),{},{url:l})),null!=t&&t.onSuccess&&t.onSuccess.apply(t,n)},onError:function(e,n){var a,r,o=(0,d.tf)(e,d.MS.RateLimited),s=null!==(a=null==o?void 0:o.message)&&void 0!==a?a:d.JV;l(s);for(var i=arguments.length,u=new Array(i>2?i-2:0),c=2;c<i;c++)u[c-2]=arguments[c];null==t||null===(r=t.onError)||void 0===r||r.call.apply(r,[t,e,n].concat(u))}}),E=C.mutateAsync,L=C.isLoading,O=function(){var e=(0,a.Z)(o().mark((function e(){var t=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(t.length>0&&void 0!==t[0]&&t[0]?"The post has been updated":"This post has been shared to your squad"),e.next=4,g.invalidateQueries(["sourceFeed",y.id]);case 4:x(f.Us.SquadFirstPost);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=(0,i.D)((0,p.nf)(P),{onSuccess:function(e){O(),n&&n(e,null==e?void 0:e.permalink)}}),j=Z.mutateAsync,z=Z.isLoading,T=Z.isSuccess,_=(0,i.D)((0,p.EM)(P),{onSuccess:function(e){O(!0),n&&n(e,null==e?void 0:e.permalink)}}),q=_.mutateAsync,D=_.isLoading,A=_.isSuccess,I=(0,i.D)((function(e){return(0,c.m5)(e,P)}),{onSuccess:function(e,t){var a=t.url;O(),n&&n(null,a)}}),M=I.mutateAsync,R=I.isLoading,U=I.isSuccess,F=z||R||T||U,J=A||D;return{isLoadingPreview:L,getLinkPreview:E,onSubmitPost:(0,u.useCallback)((function(e,t,n){if(e.preventDefault(),F)return null;if(k.id)return j({id:k.id,sourceId:t,commentary:n});var a=k.title,r=k.image,o=k.url;return a?M({url:o,title:a,image:r,sourceId:t,commentary:n}):(l("Invalid link"),null)}),[k,l,M,j,F]),onUpdatePost:(0,u.useCallback)((function(e,t,n){return e.preventDefault(),J?null:q({id:t,commentary:n})}),[q,J]),isPosting:F,preview:k,onUpdatePreview:S}}},36565:(e,t,n)=>{n.d(t,{Z:()=>a});const a={track:"_5r2X27zKbL3K-0KuztabLA==",knob:"_9VJTarzDvJAPMOKQbzHeEQ==",switch:"+hRUmPa5hVn8ncwI9jw3WQ==",children:"D5NR++a7+cgnxCM1YywMSg=="}}}]);